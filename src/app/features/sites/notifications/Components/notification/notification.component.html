<div class="min-vh-100 bg-Dark text-white">
  <div class="container py-4">
    <div class="card p-4 mb-4" style="background-color: #1A1F3766;">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="mb-3 text-white">{{"sites.notification.searchOfStolenPhone" |translate}}</h5>
        <div class="totalItems cr7 px-3 py-1 ms-2">{{page.options.totalItems}}
          {{"sites.notification.search"|translate}}
        </div>
      </div>
      <form [formGroup]="page.searchForm">
        <div class="form-body">
          <div class="row g-2">


            <div class="col-6 col-md-6 col-lg-3">
              <ng-control [form]="page.searchForm" control="ClinetName" [inputClass]="'bg-Dark border-color'"
                [labelClass]="'text-white'" label="sites.notification.clientName"
                placeholder="sites.ownership.clientName">
              </ng-control>

            </div>
            <div class="col-6 col-md-6 col-lg-3">
              <ng-control [form]="page.searchForm" control="PhoneNumber" [inputClass]="'bg-Dark border-color'"
                [labelClass]="'text-white'" label="sites.notification.PhoneNumber"
                placeholder="sites.notification.PhoneNumber">
              </ng-control>

            </div>
            <div class="col-6 col-md-6 col-lg-3">

              <ng-control [form]="page.searchForm" control="From" label="sites.notification.From"
                [inputClass]="'bg-Dark  border-color'" [labelClass]="'text-white'"
                [type]="page.ControlType.INPUT_DATE"></ng-control>
            </div>
            <div class="col-6 col-md-6 col-lg-3">

              <ng-control [form]="page.searchForm" control="To" label="sites.notification.To"
                [inputClass]="'bg-Dark  border-color'" [labelClass]="'text-white'"
                [type]="page.ControlType.INPUT_DATE"></ng-control>
            </div>

            <div class="col-12 col-lg-2  d-flex align-items-end">
              <button class='color-brand-700 rb-btn  rb-btn-sm  w-100 border-color text-white w-100' (click)="search()"
                [disabled]="page.searchForm.invalid || page.isSearching">
                <i class="uil uil-search"></i>
                <span class="rb-btn-text d-md-inline-block">
                  {{'shared.search'|translate}}</span>
              </button>
            </div>

          </div>
        </div>
      </form>
    </div>


    <div class="row g-4 justify-content-center">
      <div class="col-md-6 col-lg-5" *ngFor="let notification of notifications">
        <div class="card-custom p-4 rounded shadow w-100 d-flex flex-column h-100">
          <div class="d-flex justify-content-between align-items-center mb-3">

            <div class="d-flex align-items-center">
              <img src="../../../../../../assets/images/notificationn.png" class="me-2 custom-img" />
              <span class="Gray-300 me-2" style="font-size: 18px;"> {{"sites.notification.There is a search operation
                for a stolen phone"|translate}}</span>

            </div>
          </div>
          <hr class="Gray-600">
          <div class="row g-3 text-sm">
            <div class="col-6">
              <div class="d-flex align-items-center mb-2">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.brandName"|translate}}</p>
                  <p class="font-col mb-0 ">{{ notification.brandName != null ? notification.brandName :
                    ('sites.notification.No Data' | translate) }}</p>
                </div>
              </div>
              <div class="d-flex align-items-center ">
                <div>
                  <p class="Gray-300 mb-0 font-sm">port</p>
                  <p class="font-col mb-0 ">{{ notification.port != null ? notification.port : ('sites.notification.No
                    Data' | translate) }}</p>
                </div>
              </div>
            </div>
            <div class="col-6">

              <div class="d-flex align-items-center mb-2">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.latitude"|translate}}</p>
                  <p class="font-col mb-0 ">{{ notification.latitude != null ? notification.latitude :
                    ('sites.notification.No Data' | translate) }}</p>
                </div>
              </div>
              <div class="d-flex align-items-center ">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.longitude"|translate}}</p>
                  <p class="font-col mb-0"> {{ notification.longitude != null ? notification.longitude :
                    ('sites.notification.No Data' | translate) }}</p>
                </div>
              </div>
            </div>
            <div class="col-6">

              <div class="d-flex align-items-center mb-2">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.clientNameOwner"|translate}}</p>
                  <p class="font-col mb-0 clientHover" (click)="clientDetails(notification.clientIdOwner)">
                    {{ notification.clientNameOwner != null ? notification.clientNameOwner : ('sites.notification.No
                    Data' | translate) }}</p>
                </div>
              </div>
              <div class="d-flex align-items-center ">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.createdDate"|translate}}</p>
                  <p class="font-col mb-0">
                    {{ notification.createdDate ? (notification.createdDate | date: 'mediumDate') :
                    ('sites.notification.No Data' | translate) }}
                  </p>
                </div>
              </div>
            </div>
            <div class="col-6">

              <div class="d-flex align-items-center mb-2">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.clientNameSearcher"|translate}}</p>
                  <p class="font-col mb-0 clientHover" (click)="clientDetails(notification.clientIdSearcher)">
                    {{ notification.clientNameSearcher != null ? notification.clientNameSearcher :
                    ('sites.notification.No Data' | translate) }}</p>
                </div>
              </div>
              <div class="d-flex align-items-center ">
                <div>
                  <p class="Gray-300 mb-0 font-sm">IMEI1</p>
                  <p class="font-col mb-0 "> {{ notification.imeI1 != null ? notification.imeI1 :
                    ('sites.notification.No Data' | translate) }}</p>
                </div>
              </div>

            </div>
            <div class="col-6">

              <div class="d-flex align-items-center mb-2">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.phoneNumberOwner"|translate}}</p>
                  <p class="font-col mb-0 "> {{ notification.phoneNumberOwner != null ? notification.phoneNumberOwner :
                    ('sites.notification.No Data' | translate) }}
                  </p>
                </div>
              </div>
              <div class="d-flex align-items-center ">
                <div>
                  <p class="Gray-300 mb-0 font-sm">IP</p>
                  <p class="font-col mb-0">
                    {{ notification.ip != null ? notification.ip : ('sites.notification.No Data' | translate) }}
                  </p>
                </div>
              </div>


            </div>
            <div class="col-6">
              <div class="d-flex align-items-center mb-2">
                <div>
                  <p class="Gray-300 mb-0 font-sm">{{"sites.notification.phoneNumberSearcher"|translate}}</p>
                  <p class="font-col mb-0 ">{{ notification.phoneNumberSearcher != null ?
                    notification.phoneNumberSearcher : ('sites.notification.No Data' | translate) }}</p>
                </div>
              </div>

            </div>
          </div>
        </div>

      </div>
      <nav *ngIf="page.options.totalItems > page.options.itemsPerPage">
                <div class="d-flex justify-content-between align-items-center flex-wrap">
                  
                  <!-- Prev Button -->
                  <button 
                    class="btn btn-outline-light me-2"
                    [disabled]="page.options.currentPage === 1"
                    (click)="changePage(page.options.currentPage - 1)">
                    &laquo; Prev
                  </button>
              
                  <!-- Numbers in Center -->
                  <ul class="pagination mb-0 justify-content-center flex-wrap">
                    <li 
                      *ngFor="let pageNum of [].constructor(Math.ceil(page.options.totalItems / page.options.itemsPerPage)); let idx = index"
                      class="page-item"
                      [class.active]="page.options.currentPage === idx + 1">
                      <button class="page-link" (click)="changePage(idx + 1)">
                        {{ idx + 1 }}
                      </button>
                    </li>
                  </ul>
              
                  <!-- Next Button -->
                  <button 
                    class="btn btn-outline-light ms-2"
                    [disabled]="page.options.currentPage === Math.ceil(page.options.totalItems / page.options.itemsPerPage)"
                    (click)="changePage(page.options.currentPage + 1)">
                    Next &raquo;
                  </button>
              
                </div>
              </nav>
    </div>

    <ng-template #loadingTemplate>
      <div class="text-center text-muted py-5"> {{"sites.ownership.loading"|translate}}</div>
    </ng-template>


    <ng-template #confirmRejectTemplate>
      <div class="modal-body modal-content text-center bg-Dark no-border" style="border-radius:0px;">
        <p class="text-white py-2"> {{"sites.ownership.rejectReason"|translate}}</p>
        <textarea [(ngModel)]="selectedItem.rejectReason" class="form-control" rows="3"
          [placeholder]="'sites.ownership.enterRejectionReason' | translate">
        </textarea>

      </div>
      <div class="modal-footer bg-Dark no-border">
        <button class="btn cancel-btn me-auto text-white" (click)="modalRef.hide()">
          {{"sites.ownership.cancel"|translate}}</button>
        <button class="btn btn-danger ms-2" (click)="rejectRequest(); modalRef.hide()">
          {{"sites.ownership.sendFeedback"|translate}}
        </button>
      </div>
    </ng-template>
  </div>